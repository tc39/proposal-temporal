<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Temporal documentation</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
    <script type="application/javascript" src="./playground.js"></script>
    <link rel="stylesheet" type="text/css" href="./prism.css">
    <script>
      Temporal = { ...temporal.Temporal };
      Object.assign(Intl, temporal.Intl);

      // Customize output of Temporal objects for Chrome DevTools
      if (!window.devtoolsFormatters)
        window.devtoolsFormatters = [];
      window.devtoolsFormatters.push({
        header(x) {
          for (const type of [
            Temporal.Instant,
            Temporal.Calendar,
            Temporal.PlainDate,
            Temporal.PlainDateTime,
            Temporal.Duration,
            Temporal.PlainMonthDay,
            Temporal.PlainTime,
            Temporal.TimeZone,
            Temporal.PlainYearMonth
          ]) {
            if (x instanceof type) return ['span', {}, `${x[Symbol.toStringTag]} <${x}>`];
          }
          return null;
        },
        hasBody(x) {
          return x instanceof Temporal.Duration;
        },
        body(x) {
          const out = ['ol', { style: 'list-style-type: none;' }];
          for (const prop of [
            'years',
            'months',
            'weeks',
            'days',
            'hours',
            'minutes',
            'seconds',
            'milliseconds',
            'microseconds',
            'nanoseconds'
          ]) {
            if (x[prop] !== 0) out.push([
              'li',
              {},
              ['span', { style: 'color: purple;' }, prop],
              `: `,
              ['span', { style: 'color: blue;' }, x[prop]]
            ]);
          }
          return out;
        }
      });
    </script>
    <style>
      /* https://github.com/kognise/water.css/blob/master/src/variables-light.css */
      :root {
        --background: #efefef;
        --text-muted: #999999;
        --text-bright: #000000;
        --text-width: 900px;
        --variable: #39a33c;
      }
      body {
        font-size: 18px;
        max-width: var(--text-width);
        padding-top: 40px;  /* extra padding for banner */
        line-height: 1.5;
      }
      pre { border-left: 4px solid var(--variable); }
      code {
        padding: 1px 5px 2px 5px;
        line-height: 1.1;
        display: inline-block;
      }
      a code { color: inherit; }
      a code:hover { text-decoration: underline; }
      pre code { line-height: 1.4; }
      pre code[class*="language-"] { font-size: 0.85em; }
      pre[class*="language-"] { padding: 0.5em; }
      h1 { margin-top: 13px; }
      h2 { border-bottom: 2px solid var(--text-muted); margin-top: 2em; }
      h3 {
        border-bottom: 1px solid var(--text-muted);
        color: var(--text-muted);
        font-weight: normal;
      }
      h3 em { font-weight: bold; }
      h3 strong { color: var(--text-bright); }
      :not(h2) + h3 { margin-top: 2em; }
      footer {
        border-top: 1px solid var(--background);
        color: var(--text-muted);
        font-size: 0.8em;
        margin-top: 2em;
        padding-top: 10px;
      }
      .heading-link {
        left: calc((100vw - var(--text-width)) / 2 - 1.5em);
        opacity: 0;
        position: absolute;
        transition: opacity 150ms;
      }
      .heading-link:hover { text-decoration: none; }
      .heading-link::before { content: '¶'; }
      h3:hover .heading-link { opacity: 1; }
      .banner {
        /* Gradient from https://joshnh.com/weblog/how-to-make-an-alert-bar/ */
        background-color: #fce94f;
        background-image: linear-gradient(135deg,
                                          transparent,
                                          transparent 25%,
                                          rgba(0, 0, 0, .05) 25%,
                                          rgba(0, 0, 0, .05) 50%,
                                          transparent 50%,
                                          transparent 75%,
                                          rgba(0, 0, 0, .05) 75%,
                                          rgba(0, 0, 0, .05));
        background-size: 20px 20px;
        box-shadow: 0 5px 0 rgba(0, 0, 0, .1);
        left: 0;
        padding: 0.4em 0;
        position: absolute;
        text-align: center;
        top: 0;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="banner">
      This proposal is <strong><a href="https://blogs.igalia.com/compilers/2020/06/23/dates-and-times-in-javascript/">experimental.</a></strong>
      It is being reviewed by TC39.
      <strong>Do</strong> try it out and <a href="https://github.com/tc39/proposal-temporal/issues">report bugs</a>; <strong>don't</strong> use it in production!
    </div>
<p>This document has been superseded by the documentation of <a href="./timezone.html">Temporal.TimeZone</a>.
It&#39;s kept here for future reference if needed.</p>
<h1 id="draft-design-of-custom-time-zone-api">Draft design of custom time zone API</h1>
<h2 id="why">Why?</h2>
<p>Currently, <code>Temporal.TimeZone</code> objects can only be obtained by passing an identifier to the constructor or to <code>Temporal.TimeZone.from()</code>.
These identifiers can be:</p>
<ul>
<li>an offset string such as <code>-07:00</code>, in which case a time zone object is returned with a constant offset, with no daylight saving changes ever;</li>
<li>an IANA time zone name such as <code>America/New_York</code>, in which case a time zone object is returned that will give a different offset depending on the date that it is queried with, which attempts to be historically accurate (within reason) as to the actual time that clocks showed there.</li>
</ul>
<p>No other identifiers than the ones deemed valid by one of the above two rules (<code>±HH:MM</code> or <a href="https://tc39.es/ecma402/#sec-isvalidtimezonename">IsValidTimeZoneName</a>), are currently permitted.</p>
<p>Custom time zones are a desirable feature because implementations may want to prevent leaking information about what historical revision of the time zone data is present on the host system, or control what information about the host system&#39;s current time zone is exposed.
See <a href="https://github.com/tc39/proposal-temporal/issues/273">issue #273</a>.</p>
<p>API users may also want to perform time zone calculations with older, or newer, or more accurate versions of the time zone data than what is present in their implementation.</p>
<p>As an example, the <code>America/Chicago</code> time zone in the tzdata database is based on the historical time in Chicago.
Before the year 1883, when the US introduced time zones due to the influence of railroads, Chicago observed the local mean time of GMT-05:50:36.
Other cities in what is now the <code>America/Chicago</code> time zone would have observed their own local mean times.
If a user wanted to do accurate calculations for times occurring before 1883 in places in the <code>America/Chicago</code> time zone other than Chicago, a custom time zone would be required.
For example, St. Louis&#39;s local mean time is GMT-06:00:49.11 (<a href="https://books.google.ca/books?id=Xfg3AAAAMAAJ&amp;pg=PA63">Byrd, Mary E., 1899, <em>A Laboratory Manual In Astronomy</em>, p. 63. Athenaeum Press: Boston.</a>)</p>
<h2 id="usage-of-a-custom-time-zone">Usage of a custom time zone</h2>
<p>Like built-in time zones, custom time zones have an identifier.
In these examples we assume a custom time zone class <code>StLouisTime</code> with the identifier <code>America/St_Louis</code>.
(See the following section for how such a time zone object would be implemented.)</p>
<p>When parsing an ISO 8601 string, the only places the time zone identifier is taken into account are <code>Temporal.Instant.from()</code> and <code>Temporal.TimeZone.from()</code>.
<code>Temporal.Instant.from()</code> will call <code>Temporal.TimeZone.from()</code> to resolve the time zone identifier into a <code>Temporal.TimeZone</code> object.</p>
<p><code>Temporal.TimeZone.from()</code> can be monkeypatched by time zone implementors if it is necessary to make new time zones available globally.
The expectation is that it would rarely be necessary to do so, because if you have implemented a custom time zone for a particular calculation, you probably don&#39;t need it to be available globally.</p>
<p>Example of monkeypatching to make St. Louis mean time available globally:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> originalTemporalTimeZoneFrom <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span>from<span class="token punctuation">;</span>
Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function-variable function">from</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> id<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Temporal<span class="token punctuation">.</span>TimeZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id <span class="token operator">=</span> item<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> zone <span class="token punctuation">}</span> <span class="token operator">=</span> Temporal<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
      id <span class="token operator">=</span> zone<span class="token punctuation">.</span>ianaName <span class="token operator">||</span> zone<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
      id <span class="token operator">=</span> string<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> <span class="token string">'America/St_Louis'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StLouisTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">originalTemporalTimeZoneFrom</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'1820-04-01T18:16:25-06:00[America/St_Louis]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// returns the Absolute corresponding to 1820-04-02T00:17:14.110Z</span>

Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'1820-04-01T18:16:25-06:00[America/St_Louis]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// returns a new StLouisTime instance</span></code></pre><p>In order to lock down any leakage of information about the host system&#39;s time zone database, one would monkeypatch the <code>Temporal.TimeZone.from()</code> function which performs the built-in mapping, and replace <code>Temporal.now.timeZone()</code> to avoid exposing the current time zone.</p>
<p>For example, to allow only offset time zones, and make the current time zone always UTC:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> originalTemporalTimeZoneFrom <span class="token operator">=</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span>from<span class="token punctuation">;</span>
Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function-variable function">from</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> id<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Temporal<span class="token punctuation">.</span>TimeZone</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    id <span class="token operator">=</span> item<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> zone <span class="token punctuation">}</span> <span class="token operator">=</span> Temporal<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>zone<span class="token punctuation">.</span>ianaName <span class="token operator">===</span> <span class="token string">'UTC'</span><span class="token punctuation">)</span> id <span class="token operator">=</span> <span class="token string">'UTC'</span><span class="token punctuation">;</span>
      <span class="token keyword">else</span> id <span class="token operator">=</span> zone<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
      id <span class="token operator">=</span> string<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[+-]\d{2}:?\d{2}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">||</span> id <span class="token operator">===</span> <span class="token string">'UTC'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">originalTemporalTimeZoneFrom</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RangeError</span><span class="token punctuation">(</span><span class="token string">'invalid time zone'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Temporal<span class="token punctuation">.</span>now<span class="token punctuation">.</span><span class="token function-variable function">timeZone</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'UTC'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="implementation-of-a-custom-time-zone">Implementation of a custom time zone</h2>
<h3 id="timezone-interface"><a class="heading-link" href="#timezone-interface"></a>TimeZone interface</h3><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Temporal<span class="token punctuation">.</span>TimeZone</span> <span class="token punctuation">{</span>
  <span class="token comment">/** Sets the [[Identifier]] internal slot to @id, and creates the
   * [[InitializedTemporalTimeZone]] internal slot. A subclassed custom
   * time zone must chain up to this constructor. */</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>id <span class="token operator">:</span> string<span class="token punctuation">)</span> <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">;</span>

  <span class="token comment">// Methods that a subclassed custom time zone must implement</span>

  <span class="token comment">/** Given an exact time returns this time zone's corresponding
   * UTC offset, in nanoseconds (signed). */</span>
  <span class="token function">getOffsetNanosecondsFor</span><span class="token punctuation">(</span>instant <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">)</span> <span class="token operator">:</span> number<span class="token punctuation">;</span>

  <span class="token comment">/** Given the calendar/wall-clock time, returns an array of 0, 1, or
   * 2 (or theoretically more, but not in any currently known time zone)
   * exact times, that are possible points on the timeline corresponding
   * to it. In getInstantFor(), one of these will be selected, depending
   * on the disambiguation option. */</span>
  <span class="token function">getPossibleInstantsFor</span><span class="token punctuation">(</span>dateTime <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>PlainDateTime<span class="token punctuation">)</span> <span class="token operator">:</span> array<span class="token operator">&lt;</span>Temporal<span class="token punctuation">.</span>Instant<span class="token operator">></span><span class="token punctuation">;</span>

  <span class="token comment">/** Return the next time zone transition after `startingPoint`. */</span>
  <span class="token function">getNextTransition</span><span class="token punctuation">(</span>startingPoint <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">)</span> <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token comment">/** Return the previous time zone transition before `startingPoint`. */</span>
  <span class="token function">getPreviousTransition</span><span class="token punctuation">(</span>startingPoint <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">)</span> <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token comment">// API methods that a subclassed custom time zone doesn't need to touch</span>

  <span class="token keyword">get</span> <span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token function">getPlainDateTimeFor</span><span class="token punctuation">(</span>instant <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">)</span> <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>PlainDateTime<span class="token punctuation">;</span>
  <span class="token function">getInstantFor</span><span class="token punctuation">(</span>
      dateTime <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>PlainDateTime<span class="token punctuation">,</span>
      options<span class="token operator">?</span><span class="token operator">:</span> object
  <span class="token punctuation">)</span> <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">;</span>
  <span class="token function">getOffsetStringFor</span><span class="token punctuation">(</span>instant <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>Instant<span class="token punctuation">)</span> <span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> string<span class="token punctuation">;</span>

  <span class="token keyword">static</span> <span class="token keyword">from</span><span class="token punctuation">(</span>item <span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token operator">:</span> Temporal<span class="token punctuation">.</span>TimeZone<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>All the methods that custom time zones inherit from <code>Temporal.TimeZone</code> are implemented in terms of <code>getOffsetNanosecondsFor()</code>, <code>getPossibleInstantsFor()</code>, and the value of the <em>[[Identifier]]</em> internal slot.
For example, <code>getOffsetStringFor()</code> and <code>getPlainDateTimeFor()</code> call <code>getOffsetNanosecondsFor()</code>, and <code>getInstantFor()</code> calls both.</p>
<p>Alternatively, a custom time zone doesn&#39;t have to be a subclass of <code>Temporal.TimeZone</code>.
In this case, it can be a plain object, which must implement <code>getOffsetNanosecondsFor()</code>, <code>getPossibleInstantsFor()</code>, and <code>toString()</code>.</p>
<h2 id="show-me-the-code">Show Me The Code</h2>
<p>Here&#39;s what it could look like to implement the built-in offset-based time zones as custom time zones.
The <code>MakeDate</code>, <code>MakeDay</code>, and <code>MakeTime</code> functions are as in the <a href="https://tc39.es/ecma262/#sec-overview-of-date-objects-and-definitions-of-abstract-operations">ECMA-262 specification</a>, except that instead of milliseconds, <code>MakeDate</code> and <code>MakeDay</code> return BigInt-typed nanoseconds, and <code>MakeTime</code> returns Number-typed nanoseconds.
(This example leaves out all the type checking, range checking, and error handling, just to show the bare bones.)</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">OffsetTimeZone</span> <span class="token keyword">extends</span> <span class="token class-name">Temporal<span class="token punctuation">.</span>TimeZone</span> <span class="token punctuation">{</span>
  #offsetNs<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">sign <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> min <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ms <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> µs <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ns <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> offsetNs <span class="token operator">=</span> <span class="token function">MakeTime</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span> min<span class="token punctuation">,</span> s<span class="token punctuation">,</span> ms<span class="token punctuation">,</span> µs<span class="token punctuation">,</span> ns<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sign <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> offsetNs <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> sign <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// "-00:00" is "+00:00"</span>
    <span class="token keyword">const</span> hourString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>h<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> minuteString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>min<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sign <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'-'</span> <span class="token operator">:</span> <span class="token string">'+'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hourString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>minuteString<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>#offsetNs <span class="token operator">=</span> sign <span class="token operator">*</span> offsetNs<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getOffsetNanosecondsFor</span><span class="token punctuation">(</span><span class="token comment">/* instant */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>#offsetNs<span class="token punctuation">;</span> <span class="token comment">// offset is always the same</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPossibleInstantsFor</span><span class="token punctuation">(</span><span class="token parameter">dateTime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> iso <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">getISOFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> epochNs <span class="token operator">=</span> <span class="token function">MakeDate</span><span class="token punctuation">(</span>
      <span class="token function">MakeDay</span><span class="token punctuation">(</span>iso<span class="token punctuation">.</span>year<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>month<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">MakeTime</span><span class="token punctuation">(</span>iso<span class="token punctuation">.</span>hour<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>minute<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>second<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>millisecond<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>microsecond<span class="token punctuation">,</span> iso<span class="token punctuation">.</span>nanosecond<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Temporal<span class="token punctuation">.</span>Instant</span><span class="token punctuation">(</span>epochNs <span class="token operator">+</span> <span class="token function">BigInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#offsetNs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getNextTransition</span><span class="token punctuation">(</span><span class="token comment">/* startingPoint */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// no transitions ever</span>
  <span class="token punctuation">}</span>

  <span class="token function">getPreviousTransition</span><span class="token punctuation">(</span><span class="token comment">/* startingPoint */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// no transitions ever</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>    <footer>
      <p>
        This page includes a script which loads an implementation of Temporal in your browser.
        You can open a console in your browser's developer tools and try it out directly!
      </p>
      <p>View this or help contribute on <a href="https://github.com/tc39/proposal-temporal">GitHub</a>.</p>
    </footer>
  </body>
</html>
